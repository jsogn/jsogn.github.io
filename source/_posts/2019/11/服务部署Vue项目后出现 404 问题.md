---
layout: post
title: 'Nginx 服务部署 Vue 项目后,出现 404 问题'
tags:
  - vue
categories:
  - vue
abbrlink: 59640
---

### 前言

在本地与部署线上环境后都没有问题，使用‘history’路由模式，部署线上环境后，首页能正常访问，点击其他页面，出现 404 Not Found

<!--more-->

### 解决

刷新页面时访问的资源在服务端找不到，因为此时vue-router设置路由地址被当作url地址，此时的地址路径不是真实存在的，所以出现404现象

在服务端nginx配置里添加vue-route的跳转设置（这里首页是index.html，如果是index.php就在下面对应位置替换），配置如下：

```
server
{
    listen 80;
    server_name www.test.com;
    index index.php index.html index.htm default.php default.htm default.html;
    root /www/wwwroot/test/dist;

    #vue-router配置
    location / {
        try_files $uri $uri/ @router;
        index index.html;
    }
    location @router {
        rewrite ^.*$ /index.html last;
    }
}
```

重启 nginx 后，页面可以正常访问